

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Webhooks &mdash; eCG API Guidelines 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="eCG API Guidelines 0.1 documentation" href="index.html"/>
        <link rel="next" title="Documentation requirements" href="40-documentation-requirements.html"/>
        <link rel="prev" title="Interaction design" href="30-interaction-design.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> eCG API Guidelines</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="00-intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="00-intro.html#overview-for-the-busy-developer">Overview for the busy developer</a></li>
<li class="toctree-l2"><a class="reference internal" href="00-intro.html#history">History</a></li>
<li class="toctree-l2"><a class="reference internal" href="00-intro.html#advantages">Advantages</a></li>
<li class="toctree-l2"><a class="reference internal" href="00-intro.html#the-future">The future</a></li>
<li class="toctree-l2"><a class="reference internal" href="00-intro.html#conventions">Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="05-principles.html">Principles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="05-principles.html#technical-principles">Technical principles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="10-urls-and-uris.html">URLs and URIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="10-urls-and-uris.html#base-url">Base URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="10-urls-and-uris.html#url-and-uri-naming">URL and URI naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="10-urls-and-uris.html#query-parameters">Query parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="20-resource-representation-format.html">Resource representation format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="20-resource-representation-format.html#resources">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-resource-representation-format.html#binary-resources">Binary resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-resource-representation-format.html#resource-collections">Resource collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-resource-representation-format.html#relation-names">Relation names</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-resource-representation-format.html#field-names">Field names</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-resource-representation-format.html#field-values">Field values</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-resource-representation-format.html#errors">Errors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="30-interaction-design.html">Interaction design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="30-interaction-design.html#request-methods">Request methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="30-interaction-design.html#status-codes">Status codes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Webhooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#it-should-be-possible-to-programmatically-register-webhooks-via-the-api">It should be possible to programmatically register webhooks via the api</a></li>
<li class="toctree-l2"><a class="reference internal" href="#webhooks-may-be-registered-on-all-resource-types">Webhooks may be registered on all resource types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-body-of-a-callback-must-be-a-hal-resource">The body of a callback must be a HAL resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="#http-callbacks-should-be-signed">HTTP callbacks should be signed</a></li>
<li class="toctree-l2"><a class="reference internal" href="#events-pushed-to-the-consumers-may-additionally-be-exposed-in-a-collection-resource">Events pushed to the consumers may additionally be exposed in a collection resource</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="40-documentation-requirements.html">Documentation requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="40-documentation-requirements.html#documentation-urls">Documentation URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-documentation-requirements.html#resource-documentation">Resource documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-documentation-requirements.html#document-link-relations">Document link relations</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-documentation-requirements.html#getting-started-guide">Getting started guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-documentation-requirements.html#api-reference">API reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-documentation-requirements.html#example-code">Example code</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-documentation-requirements.html#todo">TODO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="50-security.html">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="50-security.html#authentication">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="50-security.html#oauth-2">OAuth 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="60-versioning.html">Versioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="60-versioning.html#backward-compatible-changes">1. Backward compatible changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="60-versioning.html#resource-representation-changes">2. Resource representation changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="60-versioning.html#resource-behavior-changes">3. Resource behavior changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="80-hal-and-our-deviations.html">HAL and our deviations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="80-hal-and-our-deviations.html#content-type">Content-type</a></li>
<li class="toctree-l2"><a class="reference internal" href="80-hal-and-our-deviations.html#json">JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="80-hal-and-our-deviations.html#field-names">Field names</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="99-todo.html">TODO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="99-todo.html#lots-of-small-edits">Lots of small edits</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">eCG API Guidelines</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Webhooks</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/90-webhooks.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="webhooks">
<span id="web-hooks"></span><span id="index-0"></span><h1>Webhooks<a class="headerlink" href="#webhooks" title="Permalink to this headline">Â¶</a></h1>
<p>The concept of a WebHook is simple. A WebHook is an HTTP callback: an HTTP POST that occurs when something happens; a simple event-notification via HTTP POST.
A web application implementing WebHooks will POST a message to a URL when certain things happen.
When a web application enables users to register their own URLs, the users can then extend, customize, and integrate that application with their own custom extensions or even with other applications around the web.
For the user, WebHooks are a way to receive valuable information when it happens, rather than continually polling for that data and receiving nothing valuable most of the time</p>
<div class="section" id="it-should-be-possible-to-programmatically-register-webhooks-via-the-api">
<h2>It should be possible to programmatically register webhooks via the api<a class="headerlink" href="#it-should-be-possible-to-programmatically-register-webhooks-via-the-api" title="Permalink to this headline">Â¶</a></h2>
<p>It SHOULD be possible to programmatically add, update and list webhooks by issueing POST, PUT and GET request against a resource collection containing webhooks.
The name of this collection SHOULD be hooks.</p>
<p>Example :</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">POST</span> <span class="nn">/v1/hooks</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.provider.com</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://api.consumer.com/callback/url&quot;</span><span class="p">,</span>
  <span class="nt">&quot;events&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;transactionStatusChanged&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;secret&quot;</span><span class="p">:</span> <span class="s2">&quot;very_s3cr3t&quot;</span><span class="p">,</span>
  <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="webhooks-may-be-registered-on-all-resource-types">
<h2>Webhooks may be registered on all resource types<a class="headerlink" href="#webhooks-may-be-registered-on-all-resource-types" title="Permalink to this headline">Â¶</a></h2>
<p>Webhooks MAY be registered on individual resources such as advertisement entities, resource collections, such as a list of advertisements or on the
on the api root resource. This will ensure that consumers have fine grained control over what updates they are interested in</p>
</div>
<div class="section" id="the-body-of-a-callback-must-be-a-hal-resource">
<h2>The body of a callback must be a HAL resource<a class="headerlink" href="#the-body-of-a-callback-must-be-a-hal-resource" title="Permalink to this headline">Â¶</a></h2>
<p>The body of a callback must be a HAL resource and follow the rules defined resource representation format section of this document
Example :</p>
<div class="highlight-http"><div class="highlight"><pre>POST /callback/url HTTP/1.1
Host: api.consumer.com
Content-Type: application/json
X-Ecg-Signature: b613679a0814d9ec772f95d778c35fc5ff1697c493715653c6c712144292c5ad

{
  &quot;_links&quot;:{
    &quot;curies&quot;:[
      {
         &quot;href&quot;: &quot;/v1/docs/rels/{rel}.html&quot;,
         &quot;templated&quot;: true,
         &quot;name&quot;: &quot;ec&quot;
      }
    ]
  },
  &quot;_embedded&quot;: {
      &quot;ec:transaction&quot;: {
          &quot;_links&quot;: {
              &quot;self&quot;: { &quot;href&quot;: &quot; /v1/advertisements/m123456789/transactions/123&quot; }
          },
          &quot;transactionId&quot;: 2

          .. rest of the fields go here
      }
  },
  &quot;eventType&quot;: &quot;transactionStatusChanged&quot;,
  &quot;created&quot;: &quot;2014-07-03T15:14:06Z&quot;,
  &quot;eventData&quot;: {
      &quot;transactionId&quot;: 2,
      &quot;oldStatus&quot;: &quot;unpaid&quot;,
      &quot;newStatus&quot;: &quot;paid&quot;
  }
}
</pre></div>
</div>
</div>
<div class="section" id="http-callbacks-should-be-signed">
<h2>HTTP callbacks should be signed<a class="headerlink" href="#http-callbacks-should-be-signed" title="Permalink to this headline">Â¶</a></h2>
<p>HTTP callbacks SHOULD be signed so that the consumer can validate the message&#8217;s authenticity. The signature MUST be sent as a request header with the name X-Ecg-Signature
The signature MUST be a HMAC-SHA-256 hex digest of the payload, using the hookâs secret as the key. This secret has been provided as part of the hook&#8217;s registration.</p>
</div>
<div class="section" id="events-pushed-to-the-consumers-may-additionally-be-exposed-in-a-collection-resource">
<h2>Events pushed to the consumers may additionally be exposed in a collection resource<a class="headerlink" href="#events-pushed-to-the-consumers-may-additionally-be-exposed-in-a-collection-resource" title="Permalink to this headline">Â¶</a></h2>
<p>The events that are posted to the the registered consumer MAY also be exposed as a resource collection in the API.
The name of this collection resource SHOULD be events, and this collection MUST be exposed on the same level as the hooks resource.
When events are exposed in such a fashion then the events resources posted to the callback url MUST contain a self link.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="40-documentation-requirements.html" class="btn btn-neutral float-right" title="Documentation requirements"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="30-interaction-design.html" class="btn btn-neutral" title="Interaction design"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, ECG API Focus team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>